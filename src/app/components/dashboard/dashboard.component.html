<div class="loader-container" *ngIf="loader">
  <div class="loader"></div>
</div>

<div *ngIf="showChangeModal">
  <app-custom-modal>
    <div class="custom_value_change_modal">
      <div class="custom_value_select">
        <label>Select Year: </label>
        <select
          name="customValue"
          (ngModel)="(selectCompareYear)"
          (change)="onSelectCompareYearChange($event)"
        >
          <option disabled selected>Year</option>
          <option value="2015">2015</option>
          <option value="2016">2016</option>
          <option value="2017">2017</option>
          <option value="2018">2018</option>
          <option value="2019">2019</option>
          <option value="2020">2020</option>
          <option value="2021">2021</option>
          <option value="2022">2022</option>
          <option value="2023">2023</option>
        </select>
      </div>
      <p>Or</p>
      <div class="custom_value_input">
        <label>Enter value: </label>
        <input
          type="text"
          placeholder="Enter a value"
          (change)="onSelectCompareYearChange($event)"
        />
      </div>
      <div class="custom_value__buttons">
        <button class="cancel" (click)="toggleChangeModal()">Cancel</button>
        <button class="apply">Apply</button>
      </div>
    </div>
  </app-custom-modal>
</div>

<div class="dashboard__screen">
  <div class="dashboard_container">
    <app-sidebar></app-sidebar>
    <div class="dashboard__main_screen">
      <!-- header -->
      <app-custom-header></app-custom-header>
      <div class="main_screen__main_container">
        <div class="main_container__heading">
          <h3>Dashboard</h3>
          <!-- <h3>Edit</h3> -->
        </div>
        <div class="main_container__charts_container">
          <div class="charts_container__chart">
            <div class="chart_container_1_div_1">
              <h1>${{ originalOrdersTotalAbbr }}</h1>
              <h3>YTD</h3>
              <progress id="file" value="100" max="100">956%</progress>
              <div class="div_1_progress_details">
                <span>100%</span>
                <input
                  type="number"
                  (ngModel)="(customGoal)"
                  value="{{ customGoal }}"
                  *ngIf="isEditable"
                  (blur)="makeNonEditable()"
                  (change)="setCustomGoal($event)"
                />
                <span (dblclick)="makeEditable()" *ngIf="!isEditable">
                  ${{ customGoalAbbr }}
                </span>
              </div>
            </div>
            <div class="chart_container_1_div_2">
              <app-column-chart></app-column-chart>
            </div>
            <div class="chart_container_1_div_3">
              <h3>By brand</h3>
              <div class="div_3__progress_container">
                <div class="progress_container__progress_detail">
                  <span>Brand 1</span>
                  <span>$4.5M</span>
                </div>
                <progress id="file" value="95" max="100">95%</progress>
              </div>
              <div class="div_3__progress_container">
                <div class="progress_container__progress_detail">
                  <span>Brand 2</span>
                  <span>$0.2M</span>
                </div>
                <progress id="file" value="25" max="100">25%</progress>
              </div>
              <div class="div_3__progress_container">
                <div class="progress_container__progress_detail">
                  <span>Brand 3</span>
                  <span>$1.2M</span>
                </div>
                <progress id="file" value="55" max="100">55%</progress>
              </div>
              <div class="div_3__progress_container">
                <div class="progress_container__progress_detail">
                  <span>Brand 4</span>
                  <span>$0.7M</span>
                </div>
                <progress id="file" value="15" max="100">15%</progress>
              </div>
            </div>
            <!-- <app-column-chart></app-column-chart>
            <app-bar-chart [options]="barChartOptions"></app-bar-chart> -->
          </div>

          <div class="charts_container__chart">
            <div class="chart_container_2_div_1">
              <h2>Orders</h2>

              <div class="div_1__orders_detail">
                <h1>${{ currentYearTotalAbbr }}</h1>
                <div
                  class="positive_change"
                  *ngIf="+percentChange >= 0; else otherDiv"
                >
                  <span>
                    <fa-icon [icon]="faSortUp" class="icon"></fa-icon>
                    {{ percentChange ? percentChange.toFixed(1) : null }}%</span
                  >
                </div>
                <ng-template #otherDiv>
                  <div class="negative_change">
                    <span>
                      <fa-icon [icon]="faSortDown" class="icon"></fa-icon>
                      {{
                        percentChange ? percentChange.toFixed(1) : null
                      }}%</span
                    >
                  </div>
                </ng-template>
              </div>
              <p>Vs</p>
              <div class="div_1__orders_detail">
                <h1>${{ pickedYearTotalAbbr }}</h1>
                <div class="change_comparision_date">
                  LY
                  <button (click)="toggleChangeModal()">Change</button>
                </div>
              </div>
            </div>
            <div
              class="chart_container_2_div_2"
              *ngIf="!loading; else chart_container_2_div_2_loading"
            >
              <div class="choose_date">
                <select
                  name="year"
                  (ngModel)="(selectedYear)"
                  (change)="onSelectYearChange($event)"
                >
                  <option disabled selected>Year</option>
                  <option value="2015">2015</option>
                  <option value="2016">2016</option>
                  <option value="2017">2017</option>
                  <option value="2018">2018</option>
                  <option value="2019">2019</option>
                  <option value="2020">2020</option>
                  <option value="2021">2021</option>
                  <option value="2022">2022</option>
                </select>

                <select
                  *ngIf="selectedYear !== ''"
                  name="month"
                  (ngModel)="(selectedMonth)"
                  (change)="onSelectMonthChange($event)"
                >
                  <option disabled selected>Month</option>
                  <option value="01">Jan</option>
                  <option value="02">Feb</option>
                  <option value="03">Mar</option>
                  <option value="04">Apr</option>
                  <option value="05">May</option>
                  <option value="06">Jun</option>
                  <option value="07">Jul</option>
                  <option value="08">Aug</option>
                  <option value="09">Sep</option>
                  <option value="10">Oct</option>
                  <option value="11">Nov</option>
                  <option value="12">Dec</option>
                </select>

                <select
                  *ngIf="selectedYear !== '' && selectedMonth !== ''"
                  name="days"
                  (ngModel)="(selectedDay)"
                  (change)="onSelectDayChange($event)"
                >
                  <option disabled selected>Day</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                  <option value="11">11</option>
                  <option value="12">12</option>
                  <option value="13">13</option>
                  <option value="14">14</option>
                  <option value="15">15</option>
                  <option value="16">16</option>
                  <option value="17">17</option>
                  <option value="18">18</option>
                  <option value="19">19</option>
                  <option value="20">20</option>
                  <option value="21">21</option>
                  <option value="22">22</option>
                  <option value="23">23</option>
                  <option value="24">24</option>
                  <option value="25">25</option>
                  <option value="26">26</option>
                  <option value="27">27</option>
                  <option value="28">28</option>
                  <option value="29">29</option>
                  <option value="30">30</option>
                  <option value="31">31</option>
                </select>
              </div>
              <app-bar-chart></app-bar-chart>
            </div>
            <ng-template #chart_container_2_div_2_loading>
              <div class="chart_container_2_div_2_loading">
                <app-loading-spinner></app-loading-spinner>
              </div>
            </ng-template>

            <div class="chart_container_2_div_3">
              <div class="div_3__info">
                <h3>Opps at 90%</h3>
                <div class="info__detail">
                  <span>23</span>
                  <span>$264K</span>
                </div>
              </div>
              <div class="div_3__info">
                <h3>Opps at 90%</h3>
                <div class="info__detail">
                  <span>23</span>
                  <span>$264K</span>
                </div>
              </div>
              <div class="div_3__info">
                <h3>Opps at 90%</h3>
                <div class="info__detail">
                  <span>23</span>
                  <span>$264K</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
